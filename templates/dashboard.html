{% extends "home.html" %}

{% load static %}
{% block content %}

<body>
    <div class="container">
        <img src="{% static 'images/graph.png' %}" alt="Graph" class="img-fluid">
    </div>
    <div id="kanban-board" class="kanban-board mt-4">
        <div class="kanban-stage" data-stage-id="1">
            <h4 class="text-center">Activities</h4>
            <div class="kanban-cards" id="stage-1">
                <div class="kanban-card" data-card-id="1">
                    <h5>Interest in your product</h5>
                    <p>The Jackson group</p>
                    <p>Revenue: $1000</p>
                    <div class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
                <div class="kanban-card" data-card-id="2">
                    <h5>One open space1</h5>
                    <p>Lumber</p>
                    <p>Revenue: $2000</p>
                    <div class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
                <div class="kanban-card" data-card-id="3">
                    <h5>One open space2</h5>
                    <p>Lumber</p>
                    <p>Revenue: $2000</p>
                    <div class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
                <div class="kanban-card" data-card-id="4">
                    <h5>One open space3</h5>
                    <p>Lumber</p>
                    <p>Revenue: $2000</p>
                    <div class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
                <div class="kanban-card" data-card-id="5">
                    <h5>One open space4</h5>
                    <p>Lumber</p>
                    <p>Revenue: $2000</p>
                    <div class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="trash-popup" class="trash-popup">
        <i class="fas fa-trash trash-icon"></i>
        <p>Card has been moved to the trash.</p>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.2/js/bootstrap.bundle.min.js"></script>
    <script>
        document.querySelectorAll('.kanban-cards').forEach(stage => {
            new Sortable(stage, {
                group: 'kanban',
                animation: 150,
                onEnd: function (evt) {
                    var itemEl = evt.item;
                    var fromContainer = evt.from;
                    var toContainer = evt.to;
    
                    // Show trash popup if the card is moved to the trash area
                    if (toContainer.id === 'trash-popup') {
                        showTrashPopup(itemEl);
                    }
                }
            });
        });
    
        document.querySelectorAll('.rating .fa-star').forEach(star => {
            star.addEventListener('click', function() {
                const value = this.getAttribute('data-value');
                const card = this.closest('.kanban-card');
                card.querySelectorAll('.fa-star').forEach(s => {
                    s.style.color = s.getAttribute('data-value') <= value ? '#ffc107' : '#e4e5e9';
                });
            });
        });
    
        function showTrashPopup(itemEl) {
            const popup = document.getElementById('trash-popup');
            popup.style.display = 'flex';
            setTimeout(() => {
                itemEl.remove();
                popup.style.display = 'none';
            }, 1500); // Show the popup for 1.5 seconds
        }
    </script>
</body>
{% endblock %}